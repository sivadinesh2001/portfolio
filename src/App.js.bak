import React from "react";
import { motion } from "framer-motion";
import { useState, useEffect } from "react";

// Tailwind + shadcn/ui friendly single-file React component for a premium portfolio
// Default export a React component. Customize text, links, and styles below.

export default function Portfolio() {
  const name = "KANAKAMALLA SIVA DINESH";
  const title = "R&D Engineer — Embedded Software & Networking";
  const email = "sivadineshkanakamalla@gmail.com";
  const resume = "#/assets/Kanakamalla_Siva_Dinesh_Resume.pdf";
  const linkedin = "https://www.linkedin.com/in/siva-dinesh-kanakamalla-28b863214";
  const github = "https://github.com/sivadinesh2001";
  const [activeSection, setActiveSection] = useState('about');

  useEffect(()=>{
    const ids = ['about','experience','projects','education','contact'];
    const observers = [];
    ids.forEach((id)=>{
      const el = document.getElementById(id);
      if(!el) return;
      const obs = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            setActiveSection(id);
          }
        });
      },{root: null, rootMargin: '0px', threshold: 0.5});
      obs.observe(el);
      observers.push(obs);
    });
    return ()=> observers.forEach(o=>o.disconnect());
  },[]);

  return (
    <div className="min-h-screen bg-gradient-to-b from-white to-slate-50 dark:from-slate-900 dark:to-slate-800 text-slate-900 dark:text-slate-100 scroll-smooth">
      <header className="sticky top-0 z-40 backdrop-blur bg-white/60 dark:bg-slate-900/60 border-b border-slate-200 dark:border-slate-800">
        <div className="max-w-6xl mx-auto p-4 flex items-center justify-between">
          <div className="flex items-center gap-4">
            <div className="w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-pink-500 flex items-center justify-center font-semibold text-white">KD</div>
            <div>
              <div className="text-sm font-medium">{name}</div>
              <div className="text-xs text-slate-500 dark:text-slate-300">{title}</div>
            </div>
          </div>
          <nav className="hidden md:flex gap-6 text-sm">
            {[
              {id: 'about', label: 'About'},
              {id: 'experience', label: 'Experience'},
              {id: 'projects', label: 'Projects'},
              {id: 'education', label: 'Education'},
              {id: 'skills', label: 'Skills'},
              {id: 'contact', label: 'Contact'},
            ].map((item)=> (
              <a key={item.id} href={`#${item.id}`} className={`hover:underline ${activeSection===item.id? 'text-indigo-600 dark:text-indigo-400 font-semibold' : 'text-slate-700 dark:text-slate-300'}`}>
                {item.label}
              </a>
            ))}
          </nav>
          <div className="md:hidden">
            {/* Mobile: simple anchor links stacked — users can add a menu later */}
            <a href="#about" className="text-sm">Menu</a>
          </div>
        </div>
      </header>

      <main className="max-w-6xl mx-auto p-6">
        {/* About (Hero) */}
        <section id="about" className="scroll-mt-20 py-12 flex flex-col items-start">
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.6 }} className="w-full max-w-4xl p-6 rounded-2xl bg-white dark:bg-slate-900 shadow-md">
            <h1 className="text-3xl md:text-4xl font-bold leading-tight">{name}</h1>
            <p className="mt-3 text-lg text-slate-600 dark:text-slate-300">{title} focused on embedded Linux, xPON ONU firmware, secure networking features and production automation. Proven experience shipping secure, performant networking products and test automation for mass-production.</p>

            <div className="mt-6 flex gap-4 flex-wrap">
              <a href={linkedin} target="_blank" rel="noreferrer" className="inline-block px-4 py-2 rounded-full border border-slate-200 dark:border-slate-700 text-sm">LinkedIn</a>
              <a href={github} target="_blank" rel="noreferrer" className="inline-block px-4 py-2 rounded-full border border-slate-200 dark:border-slate-700 text-sm">GitHub</a>
              <a href={`mailto:${email}`} className="inline-block px-4 py-2 rounded-full bg-indigo-600 text-white text-sm">Email Me</a>
              <a href={resume} download className="inline-block px-4 py-2 rounded-full border border-slate-200 dark:border-slate-700 text-sm">Download Resume</a>
            </div>

            <div className="mt-8 grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div className="p-4 rounded-lg bg-slate-50 dark:bg-slate-800">
                <h3 className="text-sm font-semibold">Current Role</h3>
                <p className="text-sm text-slate-600 dark:text-slate-300 mt-1">R&D Engineer — Smartlink Holdings Ltd. (Client: Digisol Network Systems) — Embedded Software (GPON/EPON) — Bangalore</p>
                <p className="mt-2 text-xs text-slate-500">Apr 2024 — Present</p>
              </div>

              <div className="p-4 rounded-lg bg-slate-50 dark:bg-slate-800">
                <h3 className="text-sm font-semibold">Top Skills</h3>
                <div className="mt-2 flex flex-wrap gap-2 text-xs">
                  {['Embedded C','Embedded Linux','xPON (GPON/EPON)','NTP & Security','IGMP/Multicast','TR-069','Wi‑Fi (2.4G/5G)'].map((s)=> (
                    <span key={s} className="px-2 py-1 bg-white dark:bg-slate-900 rounded-full border text-slate-600 dark:text-slate-300 text-xs">{s}</span>
                  ))}
                </div>
              </div>
            </div>
          </motion.div>
        </section>

        {/* Experience */}
        <motion.section id="experience" className="scroll-mt-20 py-12 flex items-start" initial={{ opacity: 0, y: 8 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ type: 'spring', stiffness: 100 }}>
          <motion.div initial={{ opacity: 0, y: 12 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ duration: 0.6 }} className="w-full p-4 rounded-2xl bg-white dark:bg-slate-900 shadow">
            <h2 className="text-2xl font-bold">Experience</h2>

            <article className="mt-4">
              <div className="flex justify-between items-start">
                <div>
                  <h3 className="text-lg font-semibold">R&D Engineer — Smartlink Holdings Ltd. (Client: Digisol)</h3>
                  <p className="text-sm text-slate-500">Bangalore — Apr 2024 — Present</p>
                </div>
                <div className="text-sm text-slate-500">Software Development — Embedded</div>
              </div>

              <ul className="mt-4 list-disc list-inside space-y-2 text-sm text-slate-600 dark:text-slate-300">
                <li>Embedded C firmware for GPON & EPON ONUs with focus on security and performance.</li>
                <li>Built secure authenticated NTP for reliable, tamper-resistant time-sync.</li>
                <li>Implemented EPON configuration features: bandwidth, loop detection, OUI registration and vendor-specific Wi‑Fi/WAN/TR-069 features.</li>
                <li>Designed multicast whitelist/blacklist with IGMP proxy and improved multicast handling.</li>
                <li>Developed MAC programming tools and test automation used in production validation (Wi‑Fi calibration, Bob calibration, throughput & coupling tests).</li>
                <li>Implemented WAN IP Locking, ACL iptables logging with rate limiting, DoS mitigation and AES‑128 protections for Wi‑Fi credentials.</li>
                <li>Implemented security features aligned with ITSAR ONU Certification (password policies, authenticated privilege escalation, web audit logs).</li>
                <li>Resolved complex bugs across ACL, MAC-filtering, LAN DNS and PPPoE modules.</li>
              </ul>
            </article>

            <article className="mt-6">
              <h3 className="text-lg font-semibold">Network Management System — Switch Server (Python)</h3>
              <p className="text-sm text-slate-500">Apr 2024 — Sep 2024</p>
              <ul className="mt-4 list-disc list-inside space-y-2 text-sm text-slate-600 dark:text-slate-300">
                <li>Built intermediary Python-based Switch Server communicating over HTTP/HTTPS; features include restart, factory reset, firmware upgrade, backup/restore and logs retrieval.</li>
                <li>Designed configuration flows for IP, VLAN, QoS, port settings, isolation and mirroring.</li>
                <li>Enabled discovery, digest authentication, keep-alives and server-side log rotation.</li>
              </ul>
            </article>
          </motion.div>
        </motion.section>

        {/* Projects */}
        <section id="projects" className="scroll-mt-20 py-12 flex items-start">
          <motion.div initial={{ opacity: 0, y: 12 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ duration: 0.6 }} className="w-full p-4 rounded-2xl bg-white dark:bg-slate-900 shadow">
            <h2 className="text-2xl font-bold">Selected Projects</h2>
            <div className="mt-4 space-y-4 text-sm text-slate-600 dark:text-slate-300">
              <div>
                <h3 className="font-semibold">CAN-Centric Industrial Monitoring and Control</h3>
                <p className="mt-2">Developed industrial automation using CAN protocol with BMP180 and MQ2 sensors. Automated lighting control with LDR (LM393). GitHub Repo: <a href={github+"/CDAC_DESD_project"} target="_blank" rel="noreferrer" className="underline text-indigo-600 dark:text-indigo-400">https://github.com/sivadinesh2001/CDAC_DESD_project</a></p>
              </div>

              <div>
                <h3 className="font-semibold">Compact Tri‑Band Patch Antenna Design</h3>
                <p className="mt-2">Designed antenna (11.54–18.17 GHz) for FSS/DBS in Ku-band using CST Suite 2022. Optimized performance: reflection coefficient, gain, and VSWR.</p>
              </div>

            </div>
          </motion.div>
        </section>

        {/* Education */}
        <section id="education" className="scroll-mt-20 py-12 flex items-start">
          <div className="w-full p-6 rounded-2xl bg-white dark:bg-slate-900 shadow">
            <h2 className="text-2xl font-bold">Education</h2>
            <div className="mt-3 text-sm space-y-3">
              <div>
                <div className="font-medium">Post Graduate Diploma in Embedded Systems and Design (PG‑DESD)</div>
                <div className="text-xs text-slate-500">CDAC, Bangalore — Sep 2023 – Feb 2024 — 81.2%</div>
              </div>

              <div>
                <div className="font-medium">B.Tech — Electronics & Communication Engineering</div>
                <div className="text-xs text-slate-500">RVR & JC College of Engineering, Guntur — 2019 – 2023 — CGPA: 9.01 / 10</div>
              </div>
            </div>
          </div>
        </section>

        <section id="skills" className="scroll-mt-20 py-12 flex items-start">
          <div className="w-full p-6 rounded-2xl bg-white dark:bg-slate-900 shadow">
            <h2 className="text-2xl font-bold">Technical Skills</h2>
            <div className="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-slate-700 dark:text-slate-300">
              <div>
                <h4 className="font-semibold">Programming & Embedded</h4>
                <ul className="list-disc list-inside mt-2">
                  <li>Embedded C (firmware development, device drivers, RTOS integration)</li>
                  <li>Basic Python (automation, scripts, test tools)</li>
                  <li>Embedded Linux, FreeRTOS, POSIX threads</li>
                </ul>

                <h4 className="font-semibold mt-4">Protocols & Networking</h4>
                <ul className="list-disc list-inside mt-2">
                  <li>UART, I2C, SPI, CAN</li>
                  <li>TCP/IP, UDP, HTTP/HTTPS, IGMP, NTP, DHCP, DNS, PPPoE</li>
                </ul>
              </div>

              <div>
                <h4 className="font-semibold">Tools & Hardware</h4>
                <ul className="list-disc list-inside mt-2">
                  <li>GitHub, Postman, Wireshark, Packeth, Burp Suite</li>
                  <li>CST Microwave Studio, Iperf, Reaver</li>
                  <li>Ethernet Switches, xPON ONU devices, BeagleBone, STM32G431, STM32F446RE</li>
                </ul>

                <h4 className="font-semibold mt-4">Security & Testing</h4>
                <ul className="list-disc list-inside mt-2">
                  <li>AES-128 encryption, ACLs, iptables logging, DoS mitigation strategies</li>
                  <li>Production testing: Wi‑Fi calibration, throughput tests, MAC programming and automation</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        {/* Contact */}
        <section id="contact" className="scroll-mt-20 py-12 flex items-start">
          <div className="w-full p-6 rounded-2xl bg-white dark:bg-slate-900 shadow">
            <h2 className="text-2xl font-bold">Contact</h2>
            <div className="mt-3 text-sm">
              <div>Email: <a href={`mailto:${email}`} className="underline">{email}</a></div>
              <div className="mt-2 flex gap-2">
                <a href={resume} download className="text-sm px-3 py-2 border rounded">Download Resume</a>
                <a href={linkedin} target="_blank" rel="noreferrer" className="text-sm px-3 py-2 border rounded">LinkedIn</a>
                <a href={github} target="_blank" rel="noreferrer" className="text-sm px-3 py-2 border rounded">GitHub</a>
              </div>
            </div>
          </div>
        </section>
      </main>

      <footer className="max-w-6xl mx-auto p-6 text-center text-sm text-slate-500">
        © {new Date().getFullYear()} {name} — Built with care. — <a href={`mailto:${email}`} className="underline">{email}</a>
      </footer>
    </div>
  );
}

